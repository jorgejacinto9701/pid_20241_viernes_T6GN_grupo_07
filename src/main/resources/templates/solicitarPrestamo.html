<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="utf-8">
    <title>Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- TAILWIND -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        body {
            background-color: #BDC3C7;
        }

        table {
            border-collapse: collapse;
            width: 100%;
        }

        th, td {
            text-align: center;
            padding: 8px;
            border: 1px solid #ddd;
        }

        th {
            background-color: #f0f0f0;
        }
    </style>
    <!--NAVBAR-->
    <nav class="navbar navbar-dark bg-dark fixed-top" style="background-color: #001623 !important ;">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <div sec:authorize="isAuthenticated()">
                    Bienvenido, <span sec:authentication="principal.username"> User</span>
                </div>
                <div sec:authorize="!isAuthenticated()">
                    Por favor inicia sesión para continuar.
                </div>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel" style="background-color: #001623 !important ;">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Menu</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                        <li class="nav-item" sec:authorize="hasRole('ROLE_PRESTATARIO')">
                            <a class="nav-link active" aria-current="page" th:href="@{/solicitarPrestamo}">Solicitar Prestamo</a>
                        </li>
						<li class="nav-item" sec:authorize="hasRole('ROLE_PRESTATARIO')">
						      <a class="nav-link" th:href="@{/listaPrestamos}"> Prestamos solicitados</a>
						  </li>
                    </ul>
                    <br>
                    <div sec:authorize="isAuthenticated()">
                        <a class="flex gap-2 items-center" th:href="@{/logout}"> <i class="fa-solid fa-right-from-bracket"></i> Cerrar Sesion    </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    <!--FIN DE NAVBAR-->
    <br>
    <br>
    <br>
</head>
<body>
    <div class="container">
        <table id="prestamosTable">
            <thead>
                <tr>
                    <th>Duración</th>
                    <th>S/150</th>
                    <th>S/200</th>
                    <th>S/300</th>
                    <th>S/400</th>
                    <th>S/500</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>15 días</td>
                    <td data-monto="154.11">S/154.11</td>
                    <td data-monto="205.49">S/205.49</td>
                    <td data-monto="308.23">S/308.23</td>
                    <td data-monto="410.98">S/410.98</td>
                    <td data-monto="513.72">S/513.72</td>
                </tr>
                <tr>
                    <td>20 días</td>
                    <td data-monto="155.49">S/155.49</td>
                    <td data-monto="207.32">S/207.32</td>
                    <td data-monto="310.98">S/310.98</td>
                    <td data-monto="414.64">S/414.64</td>
                    <td data-monto="518.30">S/518.30</td>
                </tr>
                <tr>
                    <td>25 días</td>
                    <td data-monto="156.86">S/156.86</td>
                    <td data-monto="209,15">S/209,15</td>
                    <td data-monto="313.72">S/313.72</td>
                    <td data-monto="418.30">S/418.30</td>
                    <td data-monto="522.88">S/522.88</td>
                </tr>
                <tr>
                    <td>30 días</td>
                    <td data-monto="157.23">S/157.23</td>
                    <td data-monto="210.98">S/210.98</td>
                    <td data-monto="316.47">S/316.47</td>
                    <td data-monto="421.96">S/421.96</td>
                    <td data-monto="527:45">S/527:45</td>
                </tr>
                <tr>
                    <td>35 días</td>
                    <td data-monto="159.61">S/159.61</td>
                    <td data-monto="212.81">S/212.81</td>
                    <td data-monto="319.22">S/319.22</td>
                    <td data-monto="425.62">S/425.62</td>
                    <td data-monto="532.03">S/532.03</td>
                </tr>
            </tbody>
        </table>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>

    <script>
        document.getElementById('prestamosTable').addEventListener('click', function(event) {
            if (event.target.tagName === 'TD') {
                const amount = event.target.dataset.monto;
				const duration = event.target.parentElement.firstElementChild.textContent;
				// Guardar los valores en el almacenamiento local
				        localStorage.setItem('amount', amount);
				        localStorage.setItem('duration', duration);
				        
				        // Redirigir a la otra vista
				        window.location.href = '/nuevoPrestamo';
            }
        });
    </script>
</body>
</html>
